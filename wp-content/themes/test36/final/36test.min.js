/*! 36test 2015-08-18 */
$(function(){var a,b,c=$(window),d=c.height(),e=c.width(),f=($(".block"),$(".movement")),g=$("[data-speed]"),h=0,i=0,j=0,k=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),l=0,m=!1;c.on("scroll",function(a){c.scrollTop()>=16?$(".logo__triangle-white").addClass("stick"):$(".logo__triangle-white").removeClass("stick"),c.scrollTop()>=56?$(".header").addClass("stick"):$(".header").removeClass("stick"),c.scrollTop()>=88?$(".navigation").addClass("white"):$(".navigation").removeClass("white")}),buildParallax=function(){resizeParallax();var a=0;f.data("top",0),g.each(function(a){$(this).data("height",$(this).innerHeight()),$(this).data("offset-top",$(this).offset().top-$(window).scrollTop()),$(this).data("opacity",0),$(this).data("offset-x",0),$(this).data("offset-y",0),$(this).data("mouse-offset-x",0),$(this).data("mouse-offset-y",0)}),window.scrollTo(0,a),h=l=a,k||(inHeight=f.height()-d/2,f.css("-moz-transform","translate3d(0,-"+inHeight+"px, 0)"),f.css("-webkit-transform","translate3d(0,-"+inHeight+"px, 0)"),f.css("-o-transform","translate3d(0,-"+inHeight+"px, 0)"),f.css("transform","translate3d(0,-"+inHeight+"px, 0)"),f.data("top",a),g.each(function(b){var c=$(this).data("speed"),e=($(this).data("movement-speed"),$(this).data("height")),f=$(this).data("offset-top"),g=$(this).data("mouse-offset-x"),h=$(this).data("mouse-offset-y"),i=$(this).data("offset-y"),j=a-d/2-e/2-f;i=-1*j*c/20,Modernizr.csstransforms3d?($(this).css("-moz-transform","translate3d(0px, "+i+"px, 0)"),$(this).css("-webkit-transform","translate3d(0px, "+i+"px, 0)"),$(this).css("-o-transform","translate3d(0px, "+i+"px, 0)"),$(this).css("transform","translate3d(0px, "+i+"px, 0)")):Modernizr.csstransitions&&($(this).css("-moz-transform","translateY("+i+"px)"),$(this).css("-webkit-transform","translateY("+i+"px)"),$(this).css("-o-transform","translateY("+i+"px)"),$(this).css("transform","translateY("+i+"px)")),$(this).data("mouse-offset-x",g),$(this).data("mouse-offset-y",h),$(this).data("offset-y",i)}),b())},resizeParallax=function(){d=$(window).height(),e=$(window).width(),840>e?$(".container").css("height","100%"):$(".container").length&&$(".block").length&&(containerEnd=$(".block:last-child").offset().top+$(".block:last-child").height(),$(".container").height(containerEnd)),$(".main").height(f.height())},updateParallax=function(){var b;if(h+=.05*(l-h+d/2),b=h-l,Math.abs(b)<.01&&(h=l),(Modernizr.csstransforms3d||Modernizr.csstransitions)&&!a){var c=f.data("top");c+=.2*(l-c),c_top=-c,f.css("-moz-transform","translate3d(0,"+c_top+"px, 0)"),f.css("-webkit-transform","translate3d(0,"+c_top+"px, 0)"),f.css("-o-transform","translate3d(0,"+c_top+"px, 0)"),f.css("transform","translate3d(0,"+c_top+"px, 0)"),f.data("top",c)}g.each(function(a){var b,c=0,f=$(this).data("speed"),g=$(this).data("movement-speed"),k=$(this).data("height"),m=$(this).data("offset-top"),n=$(this).data("opacity"),o=$(this).data("mouse-offset-x"),p=$(this).data("mouse-offset-y"),q=$(this).data("offset-y"),r=$(this).data("side"),s=0,t=0,u=h-d/2-k/2-m;q=-u*f/20,k=10*g/d,width=10*g/e,pageX=i-e/2,pageY=j-d/2;var v=width*pageX*-1;u=k*pageY*-1,o+=(v-o)/20,p+=(u-p)/20,r&&(b=(m+q+p-h)/(d/2-k/2),0>b?b=0:b>1&&(b=1),t=(d/2+k)*b),c=o+s,q=q+p+t,1>n&&l+d>m&&$(this).css("opacity",1-b),Modernizr.csstransforms3d?($(this).css("-moz-transform","translate3d("+c+"px, "+q+"px, 0)"),$(this).css("-webkit-transform","translate3d("+c+"px, "+q+"px, 0)"),$(this).css("-o-transform","translate3d("+c+"px, "+q+"px, 0)"),$(this).css("transform","translate3d("+c+"px, "+q+"px, 0)")):Modernizr.csstransitions&&($(this).css("-moz-transform","translateY("+q+"px)"),$(this).css("-webkit-transform","translateY("+q+"px)"),$(this).css("-o-transform","translateY("+q+"px)"),$(this).css("transform","translateY("+q+"px)")),$(this).data("mouse-offset-x",o),$(this).data("mouse-offset-y",p),$(this).data("offset-y",q),$(this).data("offsetTop",m),$(this).data("opacity",n)})},initQueryLoader=function(){$("img").length?$("body").queryLoader2({backgroundColor:"#fff",barColor:"#333",barHeight:6,onComplete:function(){window.scrollTo(0,0),$("#wrap").addClass("visible"),m=!0}}):$("#wrap").addClass("visible")},preparePage=function(){Modernizr.csstransforms3d||$(".movement").css("position","absolute")},b=function(){e>840&&updateParallax(),requestAnimFrame(b)},a=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}(),init=function(){$("body").on("mousemove",function(a){i=a.screenX,j=a.screenY}),$("body").on("mousewheel",function(a){m||a.preventDefault()}),c.on("resize",function(){resizeParallax()}),c.on("scroll",function(){l=c.scrollTop()}),a=a(),preparePage(),buildParallax(),initQueryLoader(),$(".navigation__menu, .navigation__close").on("click",function(){$("body").toggleClass("locked"),$(".logo__mobile").toggleClass("open"),$(".navigation").toggleClass("open")}),$(".navigation a").hover(function(){$(".navigation a").not(this).toggleClass("light")}),$(".footer__up").on("click",function(){$("html, body").animate({scrollTop:0},1e3)})},init()});