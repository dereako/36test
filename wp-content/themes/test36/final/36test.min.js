/*! 36test 2015-08-17 */
var $window=$(window),windowH=$window.height(),windowW=$window.width(),movingBlock=$(".block"),inertiaWrapper=$(".movement"),items=$("[data-speed]"),inertiaScrollTop=0,mouseX=0,mouseY=0,isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),scrollTop=0,mouseWheel=!1,isTouchDevice,draw;$window.on("scroll",function(a){$window.scrollTop()>=16?$(".logo__triangle-white").addClass("stick"):$(".logo__triangle-white").removeClass("stick"),$window.scrollTop()>=56?$(".header").addClass("stick"):$(".header").removeClass("stick"),$window.scrollTop()>=88?$(".navigation").addClass("white"):$(".navigation").removeClass("white")}),buildParallax=function(){resizeParallax();var a=0;inertiaWrapper.data("top",0),items.each(function(a){$(this).data("height",$(this).innerHeight()),$(this).data("offset-top",$(this).offset().top-$(window).scrollTop()),$(this).data("offset-x",0),$(this).data("offset-y",0),$(this).data("mouse-offset-x",0),$(this).data("mouse-offset-y",0)}),window.scrollTo(0,a),inertiaScrollTop=scrollTop=a,isMobile||(inHeight=inertiaWrapper.height(),inertiaWrapper.css("-moz-transform","translate3d(0,-"+inHeight+"px, 0)"),inertiaWrapper.css("-webkit-transform","translate3d(0,-"+inHeight+"px, 0)"),inertiaWrapper.css("-o-transform","translate3d(0,-"+inHeight+"px, 0)"),inertiaWrapper.css("transform","translate3d(0,-"+inHeight+"px, 0)"),inertiaWrapper.data("top",a),items.each(function(b){var c=$(this).data("speed"),d=($(this).data("movement-speed"),$(this).data("height")),e=$(this).data("offset-top"),f=$(this).data("mouse-offset-x"),g=$(this).data("mouse-offset-y"),h=$(this).data("offset-y"),i=a+windowH/2-d/2-e;h=i*c/20,Modernizr.csstransforms3d?($(this).css("-moz-transform","translate3d(0px, "+h+"px, 0)"),$(this).css("-webkit-transform","translate3d(0px, "+h+"px, 0)"),$(this).css("-o-transform","translate3d(0px, "+h+"px, 0)"),$(this).css("transform","translate3d(0px, "+h+"px, 0)")):Modernizr.csstransitions&&($(this).css("-moz-transform","translateY("+h+"px)"),$(this).css("-webkit-transform","translateY("+h+"px)"),$(this).css("-o-transform","translateY("+h+"px)"),$(this).css("transform","translateY("+h+"px)")),$(this).data("mouse-offset-x",f),$(this).data("mouse-offset-y",g),$(this).data("offset-y",h)}),draw())},resizeParallax=function(){windowH=$(window).height(),windowW=$(window).width(),$(".container").length&&$(".block").length&&(containerEnd=$(".block:last-child").offset().top+$(".block:last-child").height(),$(".container").height(containerEnd)),840>windowW&&$(".container").css("height","100%"),$(".main").height(inertiaWrapper.height())},updateParallax=function(){var a;if(inertiaScrollTop+=.05*(scrollTop-inertiaScrollTop),a=inertiaScrollTop-scrollTop,Math.abs(a)<.01&&(inertiaScrollTop=scrollTop),(Modernizr.csstransforms3d||Modernizr.csstransitions)&&!isTouchDevice){var b=inertiaWrapper.data("top");b+=.2*(scrollTop-b),c_top=b,inertiaWrapper.css("-moz-transform","translate3d(0,"+c_top+"px, 0)"),inertiaWrapper.css("-webkit-transform","translate3d(0,"+c_top+"px, 0)"),inertiaWrapper.css("-o-transform","translate3d(0,"+c_top+"px, 0)"),inertiaWrapper.css("transform","translate3d(0,"+c_top+"px, 0)"),inertiaWrapper.data("top",b)}items.each(function(a){var b,c=0,d=$(this).data("speed"),e=$(this).data("movement-speed"),f=$(this).data("height"),g=$(this).data("offset-top"),h=$(this).data("mouse-offset-x"),i=$(this).data("mouse-offset-y"),j=$(this).data("offset-y"),k=$(this).data("side"),l=0,m=0,n=inertiaScrollTop+windowH/2-f/2-g;j=-n*d/20,f=10*e/windowH,width=10*e/windowW,pageX=mouseX-windowW/2,pageY=mouseY-windowH/2;var o=width*pageX*-1;n=f*pageY*-1,h+=(o-h)/20,i+=(n-i)/20,k&&(b=(g+j+i-inertiaScrollTop)/(windowH/2-$(this).height()/2),$(this).data("waypoint",j),0>b&&(b=0),b>1&&(b=1),"right"===k&&(l=(windowW/2+500)*b),"left"===k&&(l=-((windowW/2+500)*b))),c=h+l,j=j+i+m,Modernizr.csstransforms3d?($(this).css("-moz-transform","translate3d("+c+"px, "+j+"px, 0)"),$(this).css("-webkit-transform","translate3d("+c+"px, "+j+"px, 0)"),$(this).css("-o-transform","translate3d("+c+"px, "+j+"px, 0)"),$(this).css("transform","translate3d("+c+"px, "+j+"px, 0)")):Modernizr.csstransitions&&($(this).css("-moz-transform","translateY("+j+"px)"),$(this).css("-webkit-transform","translateY("+j+"px)"),$(this).css("-o-transform","translateY("+j+"px)"),$(this).css("transform","translateY("+j+"px)")),$(this).data("mouse-offset-x",h),$(this).data("mouse-offset-y",i),$(this).data("offset-y",j)})},initQueryLoader=function(){$("img").length?$("body").queryLoader2({backgroundColor:"#fff",barColor:"#333",barHeight:6,onComplete:function(){window.scrollTo(0,0),$("#wrap").addClass("visible"),mouseWheel=!0}}):$("#wrap").addClass("visible")},preparePage=function(){Modernizr.csstransforms3d||$(".movement").css("position","absolute")},draw=function(){windowW>820&&updateParallax(),requestAnimFrame(draw)},isTouchDevice=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}(),init=function(){$("body").on("mousemove",function(a){mouseX=a.screenX,mouseY=a.screenY}),$(window).on("resize",function(){resizeParallax()}),$window.on("scroll",function(){scrollTop=$window.scrollTop()}),$("body").on("mousewheel",function(a){mouseWheel||a.preventDefault()}),isTouchDevice=isTouchDevice(),preparePage(),buildParallax(),initQueryLoader(),$(".navigation__menu, .navigation__close").on("click",function(){$("body").toggleClass("locked"),$(".logo__mobile").toggleClass("open"),$(".navigation").toggleClass("open")}),$(".navigation a").hover(function(){$(".navigation a").not(this).toggleClass("light")}),$(".footer__up").on("click",function(){return $("html, body").animate({scrollTop:0},1e3),!1})},init();